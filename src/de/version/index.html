<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Version Log</title>
    <style>
        body { font-family: Arial, sans-serif; background: #121212; color: #eee; margin: 20px; }
        h1 { text-align: center; }
        .commit { border-bottom: 1px solid #333; padding: 10px 0; }
        .commit a { color: #4caf50; text-decoration: none; }
        .commit a:hover { text-decoration: underline; }
        .timestamp { color: #888; font-size: 0.9em; }
    </style>
</head>
<body>
<h1>Version Log</h1>
<div id="log"></div>

<script>
    async function loadLog() {
        try {
            const res = await fetch('/api/version_log.json'); // gleiche Location wie HTML
            const data = await res.json();

            const container = document.getElementById('log');
            container.innerHTML = '';

            data.reverse().forEach(entry => {
                const div = document.createElement('div');
                div.className = 'commit';
                div.innerHTML = `
                <strong>${entry.author}</strong> <span class="timestamp">(${new Date(entry.timestamp).toLocaleString()})</span><br>
                ${entry.message.replace(/\n/g, '<br>')}<br>
                <a href="${entry.url}" target="_blank">Commit ansehen</a>
            `;
                container.appendChild(div);
            });
        } catch(e) {
            document.getElementById('log').innerHTML = '<p>Fehler beim Laden des Logs</p>';
            console.error(e);
        }
    }

    // Log sofort laden
    loadLog();

    // Optional: alle 30 Sekunden aktualisieren
    setInterval(loadLog, 30000);
</script>
</body>
</html>
